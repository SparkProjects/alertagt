var u_test_loc={lon:-90.492634,lat:14.649366},marker_u={},ucoords={lat:"",lon:""};$(document).ready(function(){function o(){$.getJSON("https://alertagt-api.onrender.com/ll?lon=10&lat=19",function(){})}function a(o){$.isEmptyObject(marker_u)||c.removeLayer(marker_u),marker_u=L.marker([o.lat,o.lon],{icon:l}).addTo(c),c.setView(L.latLng(o.lat,o.lon),14,animate=!0)}function e(){$("#e_no_geo").hasClass("is-hidden")&&$("#e_no_geo").removeClass("is-hidden")}function i(){$("#e_no_loc").hasClass("is-hidden")&&$("#e_no_loc").removeClass("is-hidden")}function t(){$("#e_no_dat").hasClass("is-hidden")&&$("#e_no_dat").removeClass("is-hidden")}function n(){$("#e_no_gua").hasClass("is-hidden")&&$("#e_no_gua").removeClass("is-hidden")}function s(){function o(o){ucoords.lat=o.coords.latitude,ucoords.lon=o.coords.longitude,a(ucoords),u&&r(),h_aislamiento&&salud_aislados()}function t(){i()}var n={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};navigator.geolocation?navigator.geolocation.getCurrentPosition(o,t,n):e()}function r(){u=!1,""!=ucoords.lat&&$.getJSON("https://alertagt-api.onrender.com/ll?lon="+ucoords.lon+"&lat="+ucoords.lat,function(o){o.hasOwnProperty("mensaje")?n():p=L.geoJSON(o,{pointToLayer:function(o,a){return L.marker(a,{icon:d})},onEachFeature:function(o,a){a.bindPopup('<p class="title is-5 has-text-centered">'+o.properties.tipo_serv+" "+o.properties.servicio+'</p><p class="subtitle is-6 has-text-centered">'+o.properties.municipio+", "+o.properties.departamen+'</p><footer class="card-footer"><a target="_blank" href="https://www.google.com/maps/dir/?api=1&destination='+o.properties.y_coord+","+o.properties.x_coord+"&origin="+ucoords.lat+","+ucoords.lon+'" class="card-footer-item"><span class="icon is-medium"><i class="fas fa-2x fa-map-marked-alt"></i></span></a><a target="_blank" href="https://www.waze.com/ul?ll='+o.properties.y_coord+","+o.properties.x_coord+'&navigate=yes&zoom=15" class="card-footer-item"><span class="icon is-medium"><i class="fab fa-2x fa-waze"></i></span></a></footer>',{maxWidth:180,closeButton:!1})}}).addTo(c)}).fail(function(){t()})}if($("#map").length)var c=L.map("map").setView([15.753,-90.291],7),l=(L.tileLayer("https://raw.githubusercontent.com/SparkProjects/guatemala-tiles/master/tiles/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',detectRetina:!1,maxZoom:15,minZoom:7,errorTileUrl:"https://raw.githubusercontent.com/SparkProjects/guatemala-tiles/master/tiles/fallbacktile.png"}).addTo(c),L.icon({iconUrl:"static/img/usuario.png",iconRetinaUrl:"static/img/usuario.png",shadowUrl:"static/img/sombra.png",shadowRetinaUrl:"static/img/sombra.png",iconSize:[25,33],shadowSize:[25,25],iconAncor:[0,0],shadowAnchor:[2,7],popupAnchor:[0,-10]})),d=(L.icon({iconUrl:"static/img/hospital_a.png",iconRetinaUrl:"static/img/hospital_a.png",shadowUrl:"static/img/sombra.png",shadowRetinaUrl:"static/img/sombra.png",iconSize:[25,33],shadowSize:[25,25],iconAncor:[0,0],shadowAnchor:[2,7],popupAnchor:[0,-10]}),L.icon({iconUrl:"static/img/hospital.png",iconRetinaUrl:"static/img/hospital.png",shadowUrl:"static/img/sombra.png",shadowRetinaUrl:"static/img/sombra.png",iconSize:[25,33],shadowSize:[25,25],iconAncor:[0,0],shadowAnchor:[2,7],popupAnchor:[0,-10]}));o();var p={},u=!1;$("#ubicacion_hc").click(function(o){o.preventDefault(),c.hasLayer(p)?c.removeLayer(p):(u=!0,s())}),$("#b_e_no_geo").click(function(o){o.preventDefault(),$("#e_no_geo").hasClass("is-hidden")||$("#e_no_geo").addClass("is-hidden")}),$("#b_e_no_loc").click(function(o){o.preventDefault(),$("#e_no_loc").hasClass("is-hidden")||$("#e_no_loc").addClass("is-hidden")}),$("#b_e_no_dat").click(function(o){o.preventDefault(),$("#e_no_dat").hasClass("is-hidden")||$("#e_no_dat").addClass("is-hidden")}),$("#b_e_no_gua").click(function(o){o.preventDefault(),$("#e_no_gua").hasClass("is-hidden")||$("#e_no_gua").addClass("is-hidden")})});
